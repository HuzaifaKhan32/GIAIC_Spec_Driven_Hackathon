# Data Model: Authentication - Better-Auth with Google + GitHub OAuth

This data model defines the entities and their attributes required for the authentication system using Better-Auth and Prisma ORM. These models will form the foundation of the database schema.

## Entities

### User

Represents a unique user profile within the system. This is the central entity to which all other user-specific data is linked.

**Attributes:**

-   **`id`** (string, unique, primary key): A unique identifier for the user. Generated by the database.
-   **`email`** (string, unique): The user's primary email address. Used for identification and account linking.
-   **`name`** (string, nullable): The user's display name.
-   **`image`** (string, nullable, URL): URL to the user's profile picture.
-   **`createdAt`** (datetime): Timestamp of when the user account was created.

**Relationships:**

-   One-to-many with `Account`: A user can have multiple linked OAuth accounts.
-   One-to-many with `Session`: A user can have multiple active sessions.
-   One-to-one with `UserPreferences`: A user has one set of preferences.
-   One-to-one with `LearningProgress`: A user has one learning progress record.

### Account

Represents an external OAuth provider account linked to a `User`. A single user can have multiple `Account` entries.

**Attributes:**

-   **`id`** (string, unique, primary key): A unique identifier for the account. Generated by the database.
-   **`userId`** (string, foreign key): Links this account to a `User`.
-   **`provider`** (string): The name of the OAuth provider (e.g., "google", "github").
-   **`providerAccountId`** (string, unique per provider): The unique ID of the user on the OAuth provider's system.
-   **`accessToken`** (string, nullable): OAuth access token for the provider. Can be encrypted.
-   **`refreshToken`** (string, nullable): OAuth refresh token for the provider. Can be encrypted.

**Relationships:**

-   Many-to-one with `User`: An account belongs to one user.

### Session

Represents an active user session, typically managed via secure cookies.

**Attributes:**

-   **`id`** (string, unique, primary key): A unique identifier for the session. Generated by the database.
-   **`userId`** (string, foreign key): Links this session to a `User`.
-   **`token`** (string, unique): The session token, used for client-side identification (e.g., stored in a cookie).
-   **`expiresAt`** (datetime): Timestamp indicating when the session token expires.

**Relationships:**

-   Many-to-one with `User`: A session belongs to one user.

### UserPreferences

Stores personalized settings and preferences for a specific `User`.

**Attributes:**

-   **`id`** (string, unique, primary key): A unique identifier for the preferences record.
-   **`userId`** (string, unique, foreign key): Links this preference record to a `User`.
-   **`theme`** (string, e.g., "dark", "light", "system"): The user's preferred theme.
-   **`notificationsEnabled`** (boolean): Flag indicating if the user wants to receive notifications.
-   **`language`** (string, e.g., "en", "es"): The user's preferred language for the interface.

**Relationships:**

-   One-to-one with `User`: User preferences belong to one user.

### LearningProgress

Tracks a `User`'s progress through the educational content.

**Attributes:**

-   **`id`** (string, unique, primary key): A unique identifier for the progress record.
-   **`userId`** (string, unique, foreign key): Links this progress record to a `User`.
-   **`chaptersCompleted`** (array of strings): An array of `chapter_id`s that the user has completed.
-   **`timeSpentMinutes`** (integer): Total time (in minutes) the user has spent on the platform.

**Relationships:**

-   One-to-one with `User`: Learning progress belongs to one user.

## Data Representation

These entities will be defined in the Prisma schema (`prisma/schema.prisma`) and managed using Prisma ORM.
